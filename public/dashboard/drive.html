<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Dashboard</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="Dashboard">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
        <!-- Include socket -->
        <!-- <script src="http://10.217.94.247:3000/socket.io/socket.io.js"></script> -->
    </head>
    <body>
        <div id="chosen"></div>
    </body>
    <script src="api.js"></script>
    <script>

    var server = new DinoAPI("DRIVE_DEMO");
    var players = {};
    var playerCount = 0;

    server.startHost(function(sessionKey) {
        document.body.innerHTML += "KEY " + sessionKey + "</br>";
    });

    server.onPlayer = function(id) {
        players[id] = {
            direction: 0, //-1: left, 0: straight, 1: right
            drawn: false,
        };
        var input = document.createElement("input");
        input.type = "text";
        input.id = "direction-"+id;
        document.body.appendChild(input);

        ++playerCount;
    };

    // Set Direction
    server.onEvent("GyroY", function(response) {
        console.log("message");
        console.log(response);
        players[response.id].direction = response.state.state;
        document.getElementById('direction-'+i).value = response.state.state;
    });

    </script>
</html>
